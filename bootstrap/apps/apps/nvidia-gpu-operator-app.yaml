apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: nvidia-gpu-operator
  namespace: argocd
spec:
  destination:
    namespace: nvidia-gpu-operator
    name: in-cluster
  project: default
  source:
    path: apps/nvidia-gpu-operator/overlays/prod
    repoURL: https://github.com/csobrinho/homelab
  ignoreDifferences:
    - group: nvidia.com
      kind: ClusterPolicy
      name: cluster-policy
      jsonPointers:
        - /spec/migManager/config/name
        # Remove CDI default configuration to avoid issues with argo-cd sync.
        #Â See https://docs.nvidia.com/datacenter/cloud-native/gpu-operator/latest/release-notes.html#v25-10-0
        - /spec/cdi/default
